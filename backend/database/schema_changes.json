{
  "schemaVersion": "1.0",
  "changes": [
    {
      "version": "1.1.0",
      "date": "2025-11-15",
      "changes": {
        "added": {
          "tables": [
            {
              "name": "customer_preferences",
              "columns": [
                {
                  "name": "id",
                  "type": "uuid",
                  "constraints": ["PRIMARY KEY"],
                  "description": "Primary key"
                },
                {
                  "name": "customer_id",
                  "type": "uuid",
                  "constraints": ["REFERENCES customers(id)"],
                  "description": "Reference to customers table"
                },
                {
                  "name": "preference_type",
                  "type": "varchar",
                  "constraints": ["NOT NULL"],
                  "description": "Type of preference"
                },
                {
                  "name": "value",
                  "type": "jsonb",
                  "constraints": ["NOT NULL"],
                  "description": "Preference value"
                }
              ],
              "indexes": [
                {
                  "name": "idx_customer_preferences_customer_id",
                  "columns": ["customer_id"]
                },
                {
                  "name": "idx_customer_preferences_type",
                  "columns": ["preference_type"]
                }
              ]
            }
          ],
          "columns": [
            {
              "table": "job_specifications",
              "name": "preferred_press_id",
              "type": "uuid",
              "constraints": ["REFERENCES equipment(id)"],
              "description": "Reference to preferred press for the job"
            }
          ]
        },
        "modified": {
          "columns": [
            {
              "table": "job_specifications",
              "name": "paper_stock",
              "changes": [
                {
                  "type": "DROP NOT NULL",
                  "reason": "Allow flexibility in paper stock specification"
                }
              ]
            }
          ]
        },
        "relatedChanges": {
          "api": [
            {
              "endpoint": "/api/v1/customer-preferences",
              "methods": ["POST", "GET"],
              "files": ["src/controllers/customerPreferencesController.ts"]
            }
          ],
          "types": [
            "src/types/CustomerPreference.ts",
            "src/types/JobSpecification.ts"
          ],
          "migrations": [
            "migrations/V1.1.0__add_customer_preferences.sql",
            "migrations/V1.1.0__modify_job_specifications.sql"
          ]
        }
      }
    },
    {
      "version": "1.0.0",
      "date": "2025-10-29",
      "changes": {
        "added": {
          "description": "Initial schema creation",
          "details": "Base tables for core functionality"
        }
      }
    }
  ]
}