"""
Cache Management Schema
REQ-1767541724200-xzjz9: Redis Caching Layer
"""

type Query {
  """Get cache statistics"""
  cacheStats: CacheStats!

  """Get cache health status"""
  cacheHealth: CacheHealthStatus!

  """Check if cache warming is in progress"""
  cacheWarmingStatus: CacheWarmingStatus!
}

type Mutation {
  """Warm cache for all tenants"""
  warmAllTenantsCache: CacheWarmingResult!

  """Warm cache for a specific tenant"""
  warmTenantCache(tenantId: String!): CacheWarmingResult!

  """Invalidate all cache for a tenant"""
  invalidateTenantCache(tenantId: String!): Boolean!

  """Invalidate specific cache key"""
  invalidateCacheKey(key: String!): Boolean!

  """Reset all cache (DANGER - production impact)"""
  resetAllCache: Boolean!
}

"""Cache statistics"""
type CacheStats {
  """Number of cache hits"""
  hits: Int!

  """Number of cache misses"""
  misses: Int!

  """Number of cache sets"""
  sets: Int!

  """Number of cache deletes"""
  deletes: Int!

  """Number of cache errors"""
  errors: Int!

  """Hit rate percentage (0-100)"""
  hitRate: Float!

  """Average hit duration in milliseconds"""
  avgHitDuration: Float!

  """Average miss duration in milliseconds"""
  avgMissDuration: Float!

  """Average set duration in milliseconds"""
  avgSetDuration: Float!
}

"""Cache health status"""
type CacheHealthStatus {
  """Health status: healthy, degraded, or unhealthy"""
  status: String!

  """Hit rate percentage"""
  hitRate: Float!

  """Error rate percentage"""
  errorRate: Float!
}

"""Cache warming status"""
type CacheWarmingStatus {
  """Whether warming is currently in progress"""
  inProgress: Boolean!
}

"""Cache warming result"""
type CacheWarmingResult {
  """Whether the warming operation was successful"""
  success: Boolean!

  """Total duration in seconds"""
  duration: Float!

  """Total number of items warmed"""
  itemsWarmed: Int!

  """List of errors encountered"""
  errors: [String!]!

  """Detailed results per phase"""
  phaseResults: [CacheWarmingPhaseResult!]!
}

"""Cache warming phase result"""
type CacheWarmingPhaseResult {
  """Phase name"""
  phase: String!

  """Whether the phase was successful"""
  success: Boolean!

  """Phase duration in seconds"""
  duration: Float!

  """Number of items warmed in this phase"""
  itemsWarmed: Int!

  """List of errors in this phase"""
  errors: [String!]!
}
